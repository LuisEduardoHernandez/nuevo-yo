{"ast":null,"code":"import _regeneratorRuntime from\"/Users/luiseduardohernandezgranillo/Desktop/PROYECTOS/nuevoyo/nuevo-yo/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/luiseduardohernandezgranillo/Desktop/PROYECTOS/nuevoyo/nuevo-yo/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/luiseduardohernandezgranillo/Desktop/PROYECTOS/nuevoyo/nuevo-yo/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _slicedToArray from\"/Users/luiseduardohernandezgranillo/Desktop/PROYECTOS/nuevoyo/nuevo-yo/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,useContext}from'react';import{useHistory}from'react-router-dom';import{Context}from'../../context/Context';import{types}from'../../types/types';import{API}from'../../helpers/getAPI';import{useForm}from'../../hooks/useForm';import{Modal}from'../UI/Modal';import useModal from'../../hooks/useModal';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var decoder=new TextDecoder('utf-8');export var FormLogin=function FormLogin(){var _useContext=useContext(Context),dispatch=_useContext.dispatch;var history=useHistory();// Modal\nvar _useModal=useModal(false),_useModal2=_slicedToArray(_useModal,3),isOpenModal=_useModal2[0],openModal=_useModal2[1],closeModal=_useModal2[2];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),sendData=_useState2[0],setSendData=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),errors=_useState4[0],setErrors=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),multiModal=_useState6[0],setMultiModal=_useState6[1];// Lógica formulario\nvar _useForm=useForm({}),_useForm2=_slicedToArray(_useForm,2),formValues=_useForm2[0],handleInputChange=_useForm2[1];var correo=formValues.correo,password=formValues.password;var allInputs=function allInputs(){if(correo&&password){setSendData(true);}else{setSendData(false);}};var handleShowModal=function handleShowModal(section){openModal();setMultiModal(_defineProperty({},section,true));};useEffect(function(){allInputs();},[formValues]);var handleLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var formData,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();// if (correo !== dataLogin?.correo) {\n//     setErrors(\"El usuario no existe\")\n//     handleShowModal(\"errors\")\n// } else if (password !== dataLogin?.password) {\n//     setErrors(\"La constraseña es incorrecta\")\n//     handleShowModal(\"errors\")\n// } else {\n//     setErrors(\"\")\n//     handleShowModal(\"login\")\n//     setTimeout(() => {\n//         history.replace('/dashboard?origin=login');\n//     }, 3000);\n// }\n_context.prev=1;formData=new FormData();formData.append('email',correo);formData.append('password',password);_context.next=7;return fetch(API(\"GetLead\"),{// 'headers': {\n//     'Access-Control-Allow-Origin': '*'\n// },\nmethod:\"POST\",body:formData});case 7:response=_context.sent;console.log(response);if(response.status===200){response.body.getReader().read().then(function(_ref2){var value=_ref2.value,done=_ref2.done;var data=decoder.decode(value);console.log(data);if(data.includes('\"id\":')){console.log(\"login\");dispatch({type:types.login,payload:{login:true,name:'Aaron'}});history.replace('/dashboard?origin=login');}});}_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 15:case\"end\":return _context.stop();}}},_callee,null,[[1,12]]);}));return function handleLogin(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"form-login\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,id:\"form-login\",children:[/*#__PURE__*/_jsx(\"input\",{name:\"correo\",type:\"text\",placeholder:\"Email\",value:correo,onChange:handleInputChange}),/*#__PURE__*/_jsx(\"input\",{name:\"password\",value:password,type:\"password\",placeholder:\"Contrase\\xF1a\",onChange:handleInputChange}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",id:\"contact-submit\",className:\"btn-c btn-validate-email\",disabled:!sendData,children:\"Enviar\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-ref\",onClick:function onClick(){return handleShowModal(\"forgetPW\");},children:\"\\xBFOlvidaste tu contrase\\xF1a?\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"or-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"line-text\"}),/*#__PURE__*/_jsx(\"p\",{children:\"o\"}),/*#__PURE__*/_jsx(\"div\",{className:\"line-text\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-c btn-fb\",children:\"Unirme con Facebook\"}),/*#__PURE__*/_jsxs(Modal,{isOpen:isOpenModal,closeModal:closeModal,children:[multiModal.errors&&/*#__PURE__*/_jsx(\"p\",{children:errors}),multiModal.login&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Ingreso exitoso\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Correo: \",correo]}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return closeModal();},className:\"close-modal-r\",children:\"Aceptar\"})]}),multiModal.forgetPW&&/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"modal-title\",id:\"exampleModalLabel\",children:\"\\xBFOlvidaste tu contrase\\xF1a?\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-morado\",children:\"Ingresa tu correo, para enviarte un enlace y restablece tu contrase\\xF1a\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"exampleFormControlInput1\",className:\"form-label\",children:\"Correo\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"exampleFormControlInput1\",placeholder:\"name@example.com\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-check\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-check-input\",type:\"checkbox\",value:\"\",id:\"flexCheckChecked\",checked:true}),/*#__PURE__*/_jsx(\"label\",{className:\"form-check-label\",for:\"flexCheckChecked\",children:\"Acepto ser contactado via correo electr\\xF3nico\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-footer\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",style:{maxWidth:'300px'},onClick:function onClick(){return closeModal();},children:\"Restablecer\"})})]})]})]});};","map":{"version":3,"names":["React","useEffect","useState","useContext","useHistory","Context","types","API","useForm","Modal","useModal","decoder","TextDecoder","FormLogin","dispatch","history","isOpenModal","openModal","closeModal","sendData","setSendData","errors","setErrors","multiModal","setMultiModal","formValues","handleInputChange","correo","password","allInputs","handleShowModal","section","handleLogin","e","preventDefault","formData","FormData","append","fetch","method","body","response","console","log","status","getReader","read","then","value","done","data","decode","includes","type","login","payload","name","replace","forgetPW","maxWidth"],"sources":["/Users/luiseduardohernandezgranillo/Desktop/PROYECTOS/nuevoyo/nuevo-yo/src/components/sections/FormLogin.js"],"sourcesContent":["import React, { useEffect, useState, useContext } from 'react'\nimport { useHistory } from 'react-router-dom';\nimport { Context } from '../../context/Context';\nimport { types } from '../../types/types';\nimport { API } from '../../helpers/getAPI';\nimport { useForm } from '../../hooks/useForm'\nimport { Modal } from '../UI/Modal'\nimport useModal from '../../hooks/useModal';\n\nconst decoder = new TextDecoder('utf-8')\n\nexport const FormLogin = () => {\n\n    const {dispatch}  = useContext( Context );\n    const history = useHistory();\n\n    // Modal\n    const [isOpenModal, openModal, closeModal] = useModal(false);\n    const [sendData, setSendData] = useState(false);\n    const [errors, setErrors] = useState(\"\");\n    const [multiModal, setMultiModal] = useState({});\n\n    // Lógica formulario\n    const [formValues, handleInputChange] = useForm({})\n    const { correo, password } = formValues\n\n    const allInputs = () => {\n        if (correo && password) {\n            setSendData(true);\n        } else {\n            setSendData(false);\n        }\n    }\n\n    const handleShowModal = (section) => {\n        openModal()\n        setMultiModal({[section]: true})\n    }\n\n    useEffect(() => {\n        allInputs()\n    }, [formValues]);\n\n    const handleLogin = async (e) => {\n        e.preventDefault()\n        // if (correo !== dataLogin?.correo) {\n        //     setErrors(\"El usuario no existe\")\n        //     handleShowModal(\"errors\")\n        // } else if (password !== dataLogin?.password) {\n        //     setErrors(\"La constraseña es incorrecta\")\n        //     handleShowModal(\"errors\")\n        // } else {\n        //     setErrors(\"\")\n        //     handleShowModal(\"login\")\n        //     setTimeout(() => {\n        //         history.replace('/dashboard?origin=login');\n        //     }, 3000);\n        // }\n        try {\n            let formData = new FormData();\n            formData.append('email', correo);\n            formData.append('password', password);\n            const response = await fetch(API(\"GetLead\"), {\n                // 'headers': {\n                //     'Access-Control-Allow-Origin': '*'\n                // },\n                method: \"POST\",\n                body: formData\n            });\n            console.log(response);\n            if (response.status === 200) {\n                response.body\n                    .getReader()\n                    .read()\n                    .then(({value, done}) => {\n                        const data = decoder.decode(value)\n                        console.log(data);\n                        if (data.includes('\"id\":')) {\n                            console.log(\"login\");\n                            dispatch({\n                                type: types.login,\n                                payload: {login: true, name: 'Aaron'}\n                            });\n                            history.replace('/dashboard?origin=login');\n                        }\n                    })\n            }\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    return (\n        <div className=\"form-login\">\n            <form onSubmit={handleLogin} id=\"form-login\">\n                <input\n                    name='correo'\n                    type='text'\n                    placeholder='Email'\n                    value={correo}\n                    onChange={handleInputChange}\n                    />\n                <input\n                    name='password'\n                    value={password}\n                    type='password'\n                    placeholder='Contraseña'\n                    onChange={handleInputChange}\n                />\n                <button\n                    type='submit'\n                    id='contact-submit'\n                    className=\"btn-c btn-validate-email\"\n                    disabled={!sendData}\n                >Enviar</button>\n            </form>\n\n            <p className=\"text-ref\" onClick={() => handleShowModal(\"forgetPW\")}>¿Olvidaste tu contraseña?</p>\n\n            <div className=\"or-container\">\n                <div className=\"line-text\"></div>\n                <p>o</p>\n                <div className=\"line-text\"></div>\n            </div>\n\n            <button type=\"button\" className=\"btn-c btn-fb\">Unirme con Facebook</button>\n\n            <Modal isOpen={isOpenModal} closeModal={closeModal}>\n                {multiModal.errors && (\n                    <p>{errors}</p>\n                )}\n                {multiModal.login && (\n                    <>\n                        <p>Ingreso exitoso</p>\n                        <p>Correo: {correo}</p>\n                        <button\n                            onClick={()=>closeModal()}\n                            className=\"close-modal-r\"\n                            >Aceptar\n                        </button>\n                    </>\n                )}\n                {multiModal.forgetPW && (\n                    <div className=\"\">\n                        <h5 className=\"modal-title\" id=\"exampleModalLabel\">¿Olvidaste tu contraseña?</h5>\n                        <div className=\"modal-body\">\n                            <p className=\"text-morado\">Ingresa tu correo, para enviarte un enlace y restablece tu contraseña</p>\n                            <div className=\"mb-3\">\n                                <label for=\"exampleFormControlInput1\" className=\"form-label\">Correo</label>\n                                <input type=\"email\" className=\"form-control\" id=\"exampleFormControlInput1\" placeholder=\"name@example.com\" />\n                            </div>\n\n                            <div className=\"form-check\">\n                                <input className=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"flexCheckChecked\" checked />\n                                <label className=\"form-check-label\" for=\"flexCheckChecked\">\n                                Acepto ser contactado via correo electrónico\n                                </label>\n                            </div>\n                        </div>\n                        <div className=\"modal-footer\">\n                            <button\n                                type=\"button\"\n                                className=\"btn btn-secondary\"\n                                style={{maxWidth: '300px'}}\n                                onClick={() =>closeModal()}\n                            >Restablecer</button>\n                        </div>\n                    </div>\n                )}\n            </Modal>\n        </div>\n    )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}